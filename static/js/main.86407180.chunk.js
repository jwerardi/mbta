(this.webpackJsonpmbta=this.webpackJsonpmbta||[]).push([[0],{65:function(e,t,r){},66:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),i=r.n(a),c=r(50),o=r.n(c),s=(r(65),r(19)),u=(r(66),r(25)),l=r(88),d=r(9),j=function(e){return Object(n.jsxs)(u.a,{children:[Object(n.jsx)(l.a,{}),Object(n.jsx)(d.a,{d:"flex",alignItems:"center",justifyContent:"center",marginTop:"20px",children:e.children})]})},b=r(38),O=r(44),f=r(8),p=r(39),m=r.n(p),g=r(54),h=function(e,t){var r=Object(a.useState)(!1),n=Object(s.a)(r,2),i=n[0],c=n[1],o=Object(a.useState)(null),u=Object(s.a)(o,2),l=u[0],d=u[1],j=Object(a.useState)(!1),b=Object(s.a)(j,2),O=b[0],f=b[1],p=function(e){if(e.status>=200&&e.status<300)return e.json();throw new Error(e.statusText)};return Object(a.useEffect)((function(){c(!0),function(){var r=Object(g.a)(m.a.mark((function r(){var n,a;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(e,t);case 3:return n=r.sent,r.next=6,p(n);case 6:a=r.sent,d(a),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),f(r.t0);case 13:return r.prev=13,c(!1),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[0,10,13,16]])})));return function(){return r.apply(this,arguments)}}()()}),[]),{isLoading:i,data:l,error:O}},x=r(82),v=r(30),S=r(84),T=r(83),w=r(55),P=r(56),y=r(32),F=r(80),C=r(40),I=r(81),B=r(58),D=r(85),H=r(24),L=r(86),k={bg:"black",color:"gold",border:"1px",borderColor:"gold"};function E(){var e=Object(w.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid gold;\n    width: 100%;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n          min-width: 150px;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid gold;\n      border-right: 1px solid gold;\n      max-width: 200px;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n    .header-icon{\n      float: right;\n    }\n  }\n\n  .pagination {\n    padding: 0.5rem;\n  }\n  .pagination-input{\n    background-color: black;\n    border: 1px solid gold;\n    width: 100px;\n  }\n"]);return E=function(){return e},e}var N=P.a.div(E());function R(e){var t=e.columns,r=e.data,a=e.defaultSortBy,i=e.customTableHeader,c=e.defaultFilters,o=Object(y.useTable)({columns:t,data:r,initialState:{sortBy:[a],filters:[c]},disableSortRemove:!0},y.useFilters,y.useSortBy,y.usePagination),s=o.getTableProps,u=o.getTableBodyProps,l=o.headerGroups,j=o.prepareRow,b=o.page,O=o.canPreviousPage,p=o.canNextPage,m=o.pageOptions,g=o.gotoPage,h=o.nextPage,x=o.previousPage,v=o.setPageSize,S=o.state,T=S.pageIndex,w=S.pageSize;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(d.a,{d:"flex",justifyContent:"space-between",children:[i,Object(n.jsxs)(d.a,{d:"flex",alignItems:"flex-end",flexDirection:"column",w:"300px",children:[Object(n.jsxs)(d.a,Object(f.a)(Object(f.a)({d:"flex",flexDirection:"column",alignItems:"center",w:"100%"},k),{},{children:[Object(n.jsxs)(F.a,{p:"2",children:[" Page ",Object(n.jsxs)("strong",{children:[" ",T+1," of ",m.length," "]})]}),Object(n.jsxs)(C.a,{d:"flex",alignItems:"center",marginBottom:"3",children:[Object(n.jsx)(I.a,{htmlFor:"paginationInput",children:"Go to page:"}),Object(n.jsx)(B.a,Object(f.a)(Object(f.a)({id:"paginationInput"},k),{},{type:"number",w:"40px",defaultValue:T+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;g(t)}}))]})]})),Object(n.jsx)(D.a,Object(f.a)(Object(f.a)({},k),{},{width:"100%",value:w,onChange:function(e){v(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(n.jsxs)("option",{value:e,children:["Show ",e," results per page"]},e)}))}))]})]}),Object(n.jsxs)("table",Object(f.a)(Object(f.a)({},s()),{},{children:[Object(n.jsx)("thead",{children:l.map((function(e){return Object(n.jsx)("tr",Object(f.a)(Object(f.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(n.jsxs)("th",Object(f.a)(Object(f.a)({},e.getHeaderProps()),{},{children:[Object(n.jsxs)(d.a,{d:"flex",flexDirection:"column",alignItems:"center",children:[Object(n.jsx)("div",Object(f.a)(Object(f.a)({},e.getSortByToggleProps()),{},{children:e.render("Header")})),Object(n.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]}),e.isSorted?e.isSortedDesc?Object(n.jsx)(H.a,{style:{float:"left"},name:"arrow-down"}):Object(n.jsx)(H.a,{style:{float:"right"},name:"arrow-up"}):null]}))}))}))}))}),Object(n.jsx)("tbody",Object(f.a)(Object(f.a)({},u()),{},{children:b.map((function(e,t){return j(e),Object(n.jsx)("tr",Object(f.a)(Object(f.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(n.jsx)("td",Object(f.a)(Object(f.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),Object(n.jsxs)(d.a,{d:"flex",w:"100%",justifyContent:"space-between",children:[Object(n.jsx)(L.a,Object(f.a)(Object(f.a)({},k),{},{width:"200px",onClick:function(){return x()},disabled:!O,children:"Previous Page"})),Object(n.jsx)(L.a,Object(f.a)(Object(f.a)({},k),{},{width:"200px",onClick:function(){return h()},disabled:!p,children:"Next Page"}))]})]})}var z=function(e){return Object(n.jsx)(N,{children:Object(n.jsx)(R,Object(f.a)({},e))})};z.defaultProps={defaultSortBy:{},data:[],columns:[],customTableHeader:Object(n.jsx)(n.Fragment,{})};var G=z,_=r(87);function M(e){var t=e.column,r=t.filterValue,a=t.setFilter,c=t.preFilteredRows,o=t.id,s=i.a.useMemo((function(){var e=new Set;return c.forEach((function(t){e.add(t.values[o])})),Object(O.a)(e.values())}),[o,c]);return Object(n.jsxs)(D.a,Object(f.a)(Object(f.a)({},k),{},{value:r,onChange:function(e){a(e.target.value||void 0)},children:[Object(n.jsx)("option",{value:"",children:"All"}),s.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))]}))}function q(e){var t=e.column,r=(t.filterValue,t.setFilter);return Object(n.jsx)(_.a,{onChange:function(e){return r(e.target.checked)},children:"Show past departures"})}var A=function(e){var t=e.upcomingDepartures,r=Object(a.useMemo)((function(){return[{Header:"Train #",accessor:"trainNumber",Filter:M,filter:"equals"},{Header:"Stop",accessor:"stop",Filter:M,filter:"equals"},{Header:"Route",accessor:"routeName",Filter:M,filter:"equals"},{Header:"Time",accessor:"formattedTime",Filter:q,filter:function(e,t,r){var n=new Date;return r?e:e.filter((function(e){return 1===Object(v.a)(e.original.time,n)}))},sortType:function(e,t){return Object(v.a)(null===e||void 0===e?void 0:e.original.time,null===t||void 0===t?void 0:t.original.time)}},{Header:"Status",accessor:"status",disableFilters:!0}]}),[]),i=new Date;return Object(n.jsx)(G,{customTableHeader:Object(n.jsxs)(d.a,{w:"100%",children:[Object(n.jsx)(F.a,{marginLeft:"0",fontSize:"3xl",children:Object(T.a)(i,"PPPP")}),Object(n.jsx)(F.a,{marginLeft:"4",fontSize:"2xl",children:Object(T.a)(i,"p")}),Object(n.jsx)(F.a,{textAlign:"center",fontSize:"4xl",children:"MBTA Commuter Rail Departure Board"})]}),data:t,defaultSortBy:{id:"formattedTime"},defaultFilters:{id:"formattedTime",value:!1},columns:r})};A.defaultProps={upcomingDepartures:[]};var V=A,J="hh:mm:ss a",Q=function(e){var t=h("https://api-v3.mbta.com/schedules?filter[route]=".concat(e.routeQueryString,"\n    &filter[max_time]=24:00\n    &include=route,trip,stop,prediction"),{method:"GET"}),r=t.isLoading,i=t.error,c=t.data,o=Object(a.useState)([]),u=Object(s.a)(o,2),l=u[0],j=u[1];Object(a.useEffect)((function(){if(c){var e=g(c);j(e)}}),[c]);var p=function(e){var t=e.predictedTime,r=e.originalTime;return t===r?r:Object(n.jsxs)("details",{children:[Object(n.jsx)("summary",{children:t}),"Original ",r]})},m=function(e,t){if(e){var r="On Time",a=Object(x.a)(e);if(t){var i=Object(v.a)(t,a),c=Object(S.a)(t,a);return 1===i?r="Late ".concat(c):-1===i&&(r="Early ".concat(c)),{timeISO:a,formattedTime:Object(n.jsx)(p,{predictedTime:Object(T.a)(t,J),originalTime:Object(T.a)(a,J)}),status:r}}return{timeISO:a,formattedTime:Object(T.a)(a,J),status:r}}return{timeISO:null,formattedTime:null,status:null}},g=function(e){var t=e.included,r=e.data,a=t.reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(b.a)({},t.type,[].concat(Object(O.a)(e[t.type]||[]),[t])))}),{}),i=a.prediction,c=a.route,o=a.stop,s=a.trip;return r.map((function(e){var t,r,a,u,l,d,j,b,O,f=(d=null===(t=e.relationships.prediction.data)||void 0===t?void 0:t.id)&&i.find((function(e){return e.id===d})),p=(j=e.relationships.route.data.id,c.find((function(e){return e.id===j}))),g=(b=e.relationships.stop.data.id,o.find((function(e){return e.id===b}))),h=(O=e.relationships.trip.data.id,s.find((function(e){return e.id===O}))),v=f&&Object(x.a)(null===(r=f.attributes)||void 0===r?void 0:r.arrival_time),S=m(null===(a=e.attributes)||void 0===a?void 0:a.arrival_time,v),T=S.formattedTime,w=S.timeISO,P=S.status,y=f&&Object(x.a)(null===(u=f.attributes)||void 0===u?void 0:u.departure_time),F=m(null===(l=e.attributes)||void 0===l?void 0:l.departure_time,y),C=F.formattedTime,I=F.timeISO,B=F.status||Object(n.jsxs)(n.Fragment,{children:["Last stop: ",P]}),D=C||Object(n.jsxs)(n.Fragment,{children:["Last stop: ",T]}),H=I||w;return{trainNumber:h.attributes.name,stop:g.attributes.name,routeName:p.id,formattedTime:D,status:B,time:H,arrivalTime:w,departureTime:I}}))};return Object(n.jsxs)(d.a,{w:"80%",color:"gold",children:[r&&Object(n.jsx)("div",{children:"loading..."}),i&&Object(n.jsx)("pre",{children:i.toString()}),Object(n.jsx)(V,{upcomingDepartures:l})]})};Q.defaultProps={};var K=Q;var U=function(){var e=h("https://api-v3.mbta.com/routes?type=2",{method:"GET"}),t=e.isLoading,r=e.error,i=e.data,c=Object(a.useState)(),o=Object(s.a)(c,2),u=o[0],l=o[1];return Object(a.useEffect)((function(){var e=i&&i.data.map((function(e){return e.id})).toString();l(e)}),[i]),Object(n.jsxs)(j,{children:[t&&Object(n.jsx)("div",{children:"loading..."}),r&&Object(n.jsx)("pre",{children:r.toString()}),u&&Object(n.jsx)(K,{routeQueryString:u,isLoading:t,error:r})]})},W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,89)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root")),W()}},[[78,1,2]]]);
//# sourceMappingURL=main.86407180.chunk.js.map